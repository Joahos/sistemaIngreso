<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="./../menuPrincipal.xhtml">

            <ui:define name="content">
                <h:form id="ComprasListForm">
                    <p:panel header="ADMINISTRACION DE COMPRAS">
                        <p:dataTable id="datalist" value="#{comprasController.items}" var="item"
                                     selectionMode="single" selection="#{comprasController.compraActual}"
                                     paginator="true"
                                     rowKey="#{item.idcompras}"
                                     rows="10"
                                     rowsPerPageTemplate="10,20,30,40,50"
                                     >

                            <p:ajax event="rowSelect"   update="btnEdite btnView "/>
                            <p:ajax event="rowUnselect" update=" btnEdite btnView "/>

                            <p:column style="width: 10%; text-align: center;">
                                <f:facet name="header">
                                    <h:outputText value="Numero" />
                                </f:facet>
                                <h:outputText value="#{item.numerocompra}"/>
                            </p:column>
                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="Proveedor"/>
                                </f:facet>
                                <h:outputText value="#{item.proveedor}"/>
                            </p:column>

                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="Comprador"/>
                                </f:facet>
                                <h:outputText value="#{item.comprador}"/>
                            </p:column>
                            <p:column style="width: 15%; text-align: center;">
                                <f:facet name="header">
                                    <h:outputText value="Tipo de pago" />
                                </f:facet>
                                <h:outputText value="#{item.tipopago}"/>
                            </p:column>
                            <p:column style="width: 10%; text-align: center;">
                                <f:facet name="header">
                                    <h:outputText value="Subtotal" />
                                </f:facet>
                                <h:outputText value="#{item.subtotal}"/>
                            </p:column>
                            <p:column style="width: 10%; text-align: center;">
                                <f:facet name="header">
                                    <h:outputText value="IVA" />
                                </f:facet>
                                <h:outputText value="#{item.totaliva}"/>
                            </p:column>
                            <p:column style="width: 10%; text-align: center;">
                                <f:facet name="header">
                                    <h:outputText value="Total" />
                                </f:facet>
                                <h:outputText value="#{item.total}"/>
                            </p:column>


                            <f:facet name="footer">
                                <p:commandButton id="btnView"   icon="ui-icon-search" value="Detalle" title="Detalle" 
                                                 disabled="#{empty comprasController.compraActual}"
                                                 update=":ComprasViewForm" 
                                                 oncomplete="PF('ComprasViewDialog').show()" />
                                
                                <p:commandButton id="btnEdite"   icon="ui-icon-pencil" value="Editar" title="Detalle" 
                                                 disabled="#{empty comprasController.compraActual}"
                                                 update=":ComprasEditForm" 
                                                 oncomplete="PF('ComprasEditDialog').show()" />

                                <p:commandButton id="btnDelete" icon="ui-icon-trash"  value="Eliminar" title="Eliminar"
                                                 disabled="#{empty comprasController.compraActual}"
                                                 update=":ComprasViewForm" 
                                                 oncomplete="PF('ComprasViewDialog').show()"  />
                            </f:facet>
                        </p:dataTable>
                    </p:panel>
                </h:form>



                <p:dialog id="ComprasEditDlg" widgetVar="ComprasEditDialog" modal="true" resizable="false" appendTo="@(body)" header="Editar">
                    <h:form id="ComprasEditForm">
                        <h:panelGroup id="display">
                            <p:panelGrid columns="2" rendered="#{comprasController.compraActual != null}">
                                <p:outputLabel value="#{mensajes.EditComprasLabel_idcompras}" for="idcompras" />
                                <p:inputText id="idcompras" value="#{comprasController.compraActual.idcompras}" title="#{mensajes.EditComprasTitle_idcompras}" required="true" requiredMessage="#{mensajes.EditComprasRequiredMessage_idcompras}"/>
                                <p:outputLabel value="#{mensajes.EditComprasLabel_fechacompra}" for="fechacompra" />
                                <p:calendar id="fechacompra" pattern="MM/dd/yyyy" value="#{comprasController.compraActual.fechacompra}" title="#{mensajes.EditComprasTitle_fechacompra}"  showOn="button"/>
                                <p:outputLabel value="#{mensajes.EditComprasLabel_numerocompra}" for="numerocompra" />
                                <p:inputText id="numerocompra" value="#{comprasController.compraActual.numerocompra}" title="#{mensajes.EditComprasTitle_numerocompra}" />
                                <p:outputLabel value="#{mensajes.EditComprasLabel_proveedor}" for="proveedor" />
                                <p:inputText id="proveedor" value="#{comprasController.compraActual.proveedor}" title="#{mensajes.EditComprasTitle_proveedor}" />
                                <p:outputLabel value="#{mensajes.EditComprasLabel_cedulaproveedor}" for="cedulaproveedor" />
                                <p:inputText id="cedulaproveedor" value="#{comprasController.compraActual.cedulaproveedor}" title="#{mensajes.EditComprasTitle_cedulaproveedor}" />
                                <p:outputLabel value="#{mensajes.EditComprasLabel_comprador}" for="comprador" />
                                <p:inputText id="comprador" value="#{comprasController.compraActual.comprador}" title="#{mensajes.EditComprasTitle_comprador}" />
                                <p:outputLabel value="#{mensajes.EditComprasLabel_moneda}" for="moneda" />
                                <p:inputText id="moneda" value="#{comprasController.compraActual.moneda}" title="#{mensajes.EditComprasTitle_moneda}" />
                                <p:outputLabel value="#{mensajes.EditComprasLabel_subtotal}" for="subtotal" />
                                <p:inputText id="subtotal" value="#{comprasController.compraActual.subtotal}" title="#{mensajes.EditComprasTitle_subtotal}" />
                                <p:outputLabel value="#{mensajes.EditComprasLabel_totaliva}" for="totaliva" />
                                <p:inputText id="totaliva" value="#{comprasController.compraActual.totaliva}" title="#{mensajes.EditComprasTitle_totaliva}" />
                                <p:outputLabel value="#{mensajes.EditComprasLabel_total}" for="total" />
                                <p:inputText id="total" value="#{comprasController.compraActual.total}" title="#{mensajes.EditComprasTitle_total}" />
                                <p:outputLabel value="#{mensajes.EditComprasLabel_tipopago}" for="tipopago" />
                                <p:inputText id="tipopago" value="#{comprasController.compraActual.tipopago}" title="#{mensajes.EditComprasTitle_tipopago}" />
                                <p:outputLabel value="#{mensajes.EditComprasLabel_estado}" for="estado" />
                                <p:selectBooleanCheckbox id="estado" value="#{comprasController.compraActual.estado}" />
                                <p:outputLabel value="#{mensajes.EditComprasLabel_idproveedor}" for="idproveedor" />
                                <p:selectOneMenu id="idproveedor" value="#{comprasController.compraActual.idproveedor}" required="true" requiredMessage="#{mensajes.EditComprasRequiredMessage_idproveedor}">
                                    <f:selectItem itemLabel="#{mensajes.SelectOneMessage}"/>
                                    <f:selectItems value="#{proveedorController.itemsAvailableSelectOne}"
                                                   var="idproveedorItem"
                                                   itemValue="#{idproveedorItem}"/>
                                </p:selectOneMenu>

                            </p:panelGrid>
                            <p:commandButton actionListener="#{comprasController.update}" value="#{mensajes.Save}" update="display,:ComprasListForm:datalist" oncomplete="handleSubmit(args, 'ComprasEditDialog');"/>
                            <p:commandButton value="#{mensajes.Cancel}" onclick="ComprasEditDialog.hide()"/>
                        </h:panelGroup>
                    </h:form>
                </p:dialog>

                <p:dialog id="ComprasViewDlg" widgetVar="ComprasViewDialog" modal="true" resizable="false" appendTo="@(body)" header="Ver">
                    <h:form id="ComprasViewForm">
                        <h:panelGroup id="display">
                            <p:panelGrid columns="2" rendered="#{comprasController.compraActual != null}">
                                <h:outputText value="#{mensajes.ViewComprasLabel_idcompras}"/>
                                <h:outputText value="#{comprasController.compraActual.idcompras}" title="#{mensajes.ViewComprasTitle_idcompras}"/>
                                <h:outputText value="#{mensajes.ViewComprasLabel_fechacompra}"/>
                                <h:outputText value="#{comprasController.compraActual.fechacompra}" title="#{mensajes.ViewComprasTitle_fechacompra}">
                                    <f:convertDateTime pattern="MM/dd/yyyy" />
                                </h:outputText>
                                <h:outputText value="#{mensajes.ViewComprasLabel_numerocompra}"/>
                                <h:outputText value="#{comprasController.compraActual.numerocompra}" title="#{mensajes.ViewComprasTitle_numerocompra}"/>
                                <h:outputText value="#{mensajes.ViewComprasLabel_proveedor}"/>
                                <h:outputText value="#{comprasController.compraActual.proveedor}" title="#{mensajes.ViewComprasTitle_proveedor}"/>
                                <h:outputText value="#{mensajes.ViewComprasLabel_cedulaproveedor}"/>
                                <h:outputText value="#{comprasController.compraActual.cedulaproveedor}" title="#{mensajes.ViewComprasTitle_cedulaproveedor}"/>
                                <h:outputText value="#{mensajes.ViewComprasLabel_comprador}"/>
                                <h:outputText value="#{comprasController.compraActual.comprador}" title="#{mensajes.ViewComprasTitle_comprador}"/>
                                <h:outputText value="#{mensajes.ViewComprasLabel_moneda}"/>
                                <h:outputText value="#{comprasController.compraActual.moneda}" title="#{mensajes.ViewComprasTitle_moneda}"/>
                                <h:outputText value="#{mensajes.ViewComprasLabel_subtotal}"/>
                                <h:outputText value="#{comprasController.compraActual.subtotal}" title="#{mensajes.ViewComprasTitle_subtotal}"/>
                                <h:outputText value="#{mensajes.ViewComprasLabel_totaliva}"/>
                                <h:outputText value="#{comprasController.compraActual.totaliva}" title="#{mensajes.ViewComprasTitle_totaliva}"/>
                                <h:outputText value="#{mensajes.ViewComprasLabel_total}"/>
                                <h:outputText value="#{comprasController.compraActual.total}" title="#{mensajes.ViewComprasTitle_total}"/>
                                <h:outputText value="#{mensajes.ViewComprasLabel_tipopago}"/>
                                <h:outputText value="#{comprasController.compraActual.tipopago}" title="#{mensajes.ViewComprasTitle_tipopago}"/>
                                <h:outputText value="#{mensajes.ViewComprasLabel_estado}"/>
                                <p:selectBooleanCheckbox value="#{comprasController.compraActual.estado}" disabled="true"/>
                                <h:outputText value="#{mensajes.ViewComprasLabel_idproveedor}"/>
                                <h:outputText value="#{comprasController.compraActual.idproveedor}" title="#{mensajes.ViewComprasTitle_idproveedor}"/>
                            </p:panelGrid>
                            <p:commandButton value="#{mensajes.Close}" onclick="ComprasViewDialog.hide()"/>
                        </h:panelGroup>
                    </h:form>
                </p:dialog>
            </ui:define>

        </ui:composition>

    </body>
</html>
